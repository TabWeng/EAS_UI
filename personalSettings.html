<!DOCTYPE html>
<!-- saved from url=(0014)about:internet -->
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- 上述3个meta标签*必须*放在最前面，任何其他内容都*必须*跟随其后！ -->
    <title>教育大数据学习分析系统</title>

    <!-- Bootstrap -->
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <!-- 引入按钮样式 -->
    <link rel="stylesheet" type="text/css" href="css/buttons.css">
    <!-- 引入我们自己的css文件 -->
    <link rel="stylesheet" type="text/css" href="css/myCSS/index.css">
    <link rel="stylesheet" type="text/css" href="css/myCSS/personalSettings.css">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="//cdn.bootcss.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="//cdn.bootcss.com/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>

    <body style="margin:0">
    
<!-- #！bootstrap组件-导航条 -->
<nav class="navbar navbar-inverse navbar-fixed-top" id="navbarId">
  <div class="container">
    <!-- Brand and toggle get grouped for better mobile display -->
    <!-- 响应式导航按钮 -->
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="#" id="theBrand"><span>EDAS</span>.COM</a>
    </div>
    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse navbar-inverse" id="bs-example-navbar-collapse-1">
      <!-- 小三角标签 -->
<!--       <span class="glyphicon glyphicon-triangle-bottom" id="triStyle" aria-hidden="true" ></span>   -->       
      <ul class="nav navbar-nav navbar-right"> 
        <li><a href="#" id="mediumWord">基于学立方数据学习分析系统</a></li>
        <li><a href="index.html">首页</a></li>
        <li><a href="serviceHall.html">服务大厅</a></li>
        <li><a href="news.html">消息<span class="badge" id="newsTip">!</span></a></li>
        <li><a href="register.html">注册 | 登录</a></li>
        
  <!--*登录后的显示*******************************************-->
        <!-- 显示用户头像等 -->
        <li>
          <a href="#">
            <!-- 头像 -->
            <img id="myHeadPic" src="images/14.jpg">
          </a>
        </li>
        <!-- 小三角标签 --> 
        <li class="dropdown">
          <span class="glyphicon glyphicon-triangle-bottom" id="triStyle" aria-hidden="true" class="dropdown-toggle" data-toggle="dropdown"></span>
          <ul class="dropdown-menu" id="myClickPic">
            <li><a>hlwyfeng</a></li>
            <li role="separator" class="divider"></li>
            <li><a href="personalCenter.html">个人中心</a></li>
            <li role="separator" class="divider"></li>
            <li><a href="vipPay.html"><span id="linkVIP">申请VIP</span></a></li>
            <li role="separator" class="divider"></li>
            <li><a href="#">退出</a></li>
          </ul>
        </li>
  <!--*结束**************************************************-->

      </ul>
    </div><!-- /.navbar-collapse -->
  </div><!-- /.container-fluid -->

  <!-- 载入子系统超链接 -->
<!--   <div id="smallSysForLink">
    <div class="container">
      <div class="row">
        <div class="col-md-8">
            <a href="" class="D-mediumWord" id="mediumWord"><span>基于学立方</span>数据学习分析系统</a> -->
            <!-- <a href="#" class="button button-raised button-pill button-inverse">进入使用</a> -->
<!--             <a href="" class="button button-primary hidden-xs" id="intoSmallSysBtn">进入使用</a>
        </div>
      </div>
    </div>
  </div> -->
</nav>

<!-- 抵消固定导航的高度 -->
<div id="myOffsetNav"  >
</div>

<!--编码内容开始*************************************************************-->


<div class="container "style="margin-top: 10px;">
<div class="col-md-8 col-md-offset-2 D-myContainer">
<div  class="form-group form-horizontal" >
	<div class="row">
		<div class="col-md-4 col-md-offset-4 col-sm-4 col-sm-offset-4 col-xs-12"id="Picture">
		<div data-toggle="modal" data-target="#modifyPictures"><img src="images/picture.jpg" style="width: 100%;max-width: 150px;border-radius:150px;box-shadow:0px 0px 12px #7E7E7E;cursor:pointer; "title="点击更改头像" id="pic"></div>
		<label class="control-label">用户名：</label>
		<span id="username">002</span>
		</div>
	</div>
	     <hr  style=" border-bottom: 1px solid #78a355">
	     <form action="">
	     <div class="row form-group">
	     	<label class="control-label col-md-3">姓名</label>
	     	<div class="col-md-6">
	     	<input type="text" class="form-control ">
	     	</div>
	     	<div class="col-md-3">
	     		<span  class="spanfo"></span>
	     	</div>
	     </div>
	     <div class="row form-group">
	     	<label class="control-label col-md-3">密码</label>
	     	<div class="col-md-6">
	     	<input type="password" class="form-control "id="psw">
	     	</div>
	     	<div class="col-md-3">
	     		<span  class="spanfo"></span>
	     	</div>
	     </div>
	     <div class="row form-group">
	     	<label class="control-label col-md-3">确认密码</label>
	     	<div class="col-md-6">
	     	<input type="password" class="form-control "id="repsw">
	     	</div>
	     	<div class="col-md-3">
	     		<span id="pswinfo"class="spanfo"></span>
	     	</div>
	     </div>
	     <div class="row form-group">
	     	<label class="control-label col-md-3">支付宝账号</label>
	     	<div class="col-md-6">
	     	<input type="text" class="form-control ">
	     	</div>
	     	<div class="col-md-3">
	     		<span  class="spanfo"></span>
	     	</div>
	     </div>	
	     <div class="row form-group">
	     	<label class="control-label col-md-3">邮箱</label>
	     	<div class="col-md-6">
	     	<input type="email" class="form-control "id="txtEmail">
	     	</div>
	     	<div class="col-md-3">
	     		<span id="spinfo"class="spanfo"></span>
	     	</div>
	     </div>	
	     <div class="row form-group">
	     	<label class="control-label col-md-3">手机号码</label>
	     	<div class="col-md-6">
	     	<input type="text" class="form-control "id="mobile">
	     	</div>
	     	<div class="col-md-3">
	     		<span id="phonefo" class="spanfo"></span>
	     	</div>
	     </div>
	     <div class="row form-group">
	     	<label class="control-label col-md-3"> 验证码</label>
	     	<div class="col-md-3">
	     	<input type="text" class="form-control "id="phoneNum">
	     	</div>
	     	<div class="col-md-3 ">
	     	<button class="btn btn-info col-xs-12"id="zphone" >获取手机验证码</button>
	     	</div>
	     	<div class="col-md-3">
	     		<span  class="spanfo"></span>
	     	</div>
	     </div>
	     
	     <div class="row form-group"style="margin-top: 30px;">
	     	<label class="control-label col-md-3"> </label>
	     	<div class="col-md-6">
	     	<button type="submit" class="btn btn-primary col-xs-12"id="verify">确认修改</button>
	     	</div>
	     </div>

      </form>
<!-- 修改头像 -->
 <div class="modal fade" id="modifyPictures" tabindex="-1" data-backdrop="static">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-body">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">
                        &times;
                    </span>
                </button>
                <div class="container">
                <div class="col-md-offset-1 col-md-8  ">
             <form action="" method="post" id="P-modify">
             <div class="row">
             
               <div class="imageBox col-md-8 col-sm-6" style="padding: 0 15px;">
                   <div class="thumbBox"></div>
                   <div class="spinner"style="display: none">Loading...</div>
               </div>
               <div class="col-md-4 col-sm-6">
              	  <div class="cropped"id="preview" ></div>
               
               </div>
             
              </div>
              <div class="row">

              	  <div class=" col-md-3 col-sm-3 ">
                    <input id="upload-file" type="file"style="display:none ;">
                    <a class="btn btn-primary  col-xs-12 Pbtn" onclick="$('input[id=upload-file]').click();">
                     选择图片
                    </a>
                  </div>
                
              	   <div class="col-md-2 col-sm-3 col-xs-12  btn-group">
                    <input type="button" id="btnZoomIn" class="  btn btn-primary Pbtn col-xs-6 " value="+">
                  
                     <input type="button" id="btnZoomOut" class="  btn btn-primary col-xs-6 Pbtn" value="-">
                  </div>

               
              	  <div class="col-md-3   col-sm-3">
                    <input type="button" id="btnCrop"  class="btn btn-primary  col-xs-12 Pbtn" value="上传">
                  </div>
               </div>

               </div>
               
           
              
              	

            
              </form>
              </div>
              </div>
        </div>
    </div>
</div>      
</div>      




</div>
</div>
 


<!--编码内容结束************************************************************-->

<!-- 页尾 -->
<!-- <div class="D-footer" style="margin-top: 80px">
  <div class="row">
    <p class="h3" style="text-align: center;margin-top: 40px;">@福建师范大学开发团队</p>
  </div>
</div> -->




    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="js/jquery-1.12.0.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="js/bootstrap.min.js"></script>
    <!-- 引入自己写的响应式页面插件 -->
    <script src="js/myResponsive.js" type="text/javascript"></script>
    <script type="text/javascript" src="js/cropbox.js"></script>
    <!-- 我自己的JavaScript -->
      

  </body>
</html>
<script type="text/javascript">
$(window).load(function() {
	  $("input").blur(function() { //注册blur的事件
       $(this).each(function() { //遍历input元素对象 
        if ("" == $(this).val()) { //判断元素对象的value值
          $(this).addClass("error");//添加css样式
          $(this).focus();
        }else{
            $(this).removeClass("error");
        }
      });
     });


	var options =
	{
		thumbBox: '.thumbBox',
		spinner: '.spinner',
		imgSrc: 'images/avatar.jpg'
	}
	var cropper = $('.imageBox').cropbox(options);
	$('#upload-file').on('change', function(){
		var reader = new FileReader();
		reader.onload = function(e) {
			options.imgSrc = e.target.result;
			cropper = $('.imageBox').cropbox(options);
		}
		reader.readAsDataURL(this.files[0]);
		this.files = [];
	})
	$('#btnCrop').on('click', function(){
		var img = cropper.getDataURL();
		alert(""+img+"");
		$('.cropped').html('');
		$('.cropped').append('<img src="'+img+'" align="absmiddle" style="width:150px;margin-top:10px;border-radius:150px;box-shadow:0px 0px 12px #7E7E7E;">');
		$('#pic').replaceWith('<img src="'+img+'"style="width: 100%;max-width: 150px;border-radius:150px;box-shadow:0px 0px 12px #7E7E7E;cursor:pointer; "title="点击更改头像" id="pic">');
		  
	})
	$('#btnZoomIn').on('click', function(){
		cropper.zoomIn();
	})
	$('#btnZoomOut').on('click', function(){
		cropper.zoomOut();
	})
});
// 验证码判断
          var flag2 = false;
          $("#phoneNum").blur(function(){
            var validatecode = "validateCode=" + $("#phoneNum")[0].value;
         
            if($("#phoneNum")[0].value != ''){         
              $.get("${pageContext.request.contextPath}/user_checkValidateCode",validatecode,function(result){
                 if(result == "false"){
                  $("#phoneNum").after("<p id='validate' class='D-hint' style='color: red;'>验证码不正确！</p>");
                    flag2 = false;
                 }else{
                  flag2 = true;
                 }
              },"text");

              $("#phoneNum").focus(function(){
                $("#validate").remove();
              });
            }
          });

        // 手机验证码判断 - 来自短信api
        $("#zphone").click(function(){
          if($("#mobile")[0].value == ''){
            alert("请先输入手机号码！");
          }else{
            get_mobile_code();            
          }
        });

        function get_mobile_code(){
              $.post('${pageContext.request.contextPath}/user_sendValidateCode', {mobile:jQuery.trim($('#mobile').val())}, function(msg) {
            if(msg=='提交成功'){
              RemainTime();
            }
              });
        };

        var iTime = 59;
        var Account;

        function RemainTime(){
          $("#zphone").css({"background-color":"#B9E563"});
          document.getElementById('zphone').disabled = true;
          var iSecond,sSecond="",sTime="";
          if (iTime >= 0){
            iSecond = parseInt(iTime%60);
            iMinute = parseInt(iTime/60)
            if (iSecond >= 0){
              if(iMinute>0){
                sSecond = iMinute + "分" + iSecond + "秒";
              }else{
                sSecond = iSecond + "秒";
              }
            }
            sTime=sSecond;
            if(iTime==0){
              clearTimeout(Account);
              sTime='获取手机验证码';
              iTime = 59;
              document.getElementById('zphone').disabled = false;
            }else{
              Account = setTimeout(function(){RemainTime()},1000);
              iTime=iTime-1;
            }
          }else{
            sTime='没有倒计时';
          }
          document.getElementById('zphone').value = sTime;
        } 
        $("#txtEmail").blur(function () {
                
                    if (/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/.test($(this).val()) == false) {
                        $("#spinfo").text("邮箱格式不正确，请重新填写！");
                        $(this).focus();
                    }
                    else {
                        $("#spinfo").text('');
                       
                        state=true;
                    }
                 
            }) 
        $("#mobile").blur(function () {
                
                    if (/^((13[0-9])|(15[^4,\D])|(18[0,5-9]))\d{8}$/.test($(this).val()) == false) {
                        $("#phonefo").text("手机号码格式不正确，请重新填写！");
                        $(this).focus();
                    }
                    else {
                        $("#phonefo").text('');
                       
                        state=true;
                    }
                 
            })
        $("#repsw").blur(function(){

        	var psw=$("#psw").val();
        	var repsw=$("#repsw").val();
        	if (psw!=repsw) {
        		$("#pswinfo").text("两次密码不一致，请重新填写!");
        	}

        })


</script>
